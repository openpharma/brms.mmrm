<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Chronologize a dataset — brm_data_chronologize • brms.mmrm</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Chronologize a dataset — brm_data_chronologize"><meta name="description" content="Convert the discrete time variable into an ordered factor."><meta property="og:description" content="Convert the discrete time variable into an ordered factor."><meta property="og:image" content="/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">brms.mmrm</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0.9001</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Usage</h6></li>
    <li><a class="dropdown-item" href="../articles/usage.html">Usage</a></li>
    <li><a class="dropdown-item" href="../articles/subgroup.html">Subgroup analysis</a></li>
    <li><a class="dropdown-item" href="../articles/simulation.html">Simulation</a></li>
    <li><a class="dropdown-item" href="../articles/archetypes.html">Informative prior archetypes</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Validation</h6></li>
    <li><a class="dropdown-item" href="../articles/sbc.html">Simulation-based calibration checking</a></li>
    <li><a class="dropdown-item" href="../articles/fev1.html">FEV1 data comparison between Bayesian and frequentist MMRMs</a></li>
    <li><a class="dropdown-item" href="../articles/bcva.html">BCVA data comparison between Bayesian and frequentist MMRMs</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/openpharma/brms.mmrm/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Chronologize a dataset</h1>
      <small class="dont-index">Source: <a href="https://github.com/openpharma/brms.mmrm/blob/main/R/brm_data_chronologize.R" class="external-link"><code>R/brm_data_chronologize.R</code></a></small>
      <div class="d-none name"><code>brm_data_chronologize.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Convert the discrete time variable into an ordered factor.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">brm_data_chronologize</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  order <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  levels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">data</span>, <span class="st">"brm_time"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Data frame or tibble with longitudinal data.</p></dd>


<dt id="arg-order">order<a class="anchor" aria-label="anchor" href="#arg-order"></a></dt>
<dd><p>Optional character string with the name of a variable in
the data for ordering the time variable.
Either <code>order</code> or <code>levels</code> must be supplied, but not both together.
If <code>order</code> is supplied,
the levels of <code>data[[order]]</code> must have a 1:1 correspondence with
those of <code>data[[time]]</code>, and <code>sort(unique(data[[order]]))</code> must
reflect the desired order of the levels of <code>data[[time]]</code>. For example,
suppose you have a CDISC dataset with categorical time variable <code>AVISIT</code>
and integer variable <code>AVISITN</code>. Then,
<code>brm_data_chronologize(time = "AVISIT", order = "AVISITN")</code> will turn
<code>AVISIT</code> into an ordered factor with levels that respect the ordering
in <code>AVISITN</code>.</p></dd>


<dt id="arg-levels">levels<a class="anchor" aria-label="anchor" href="#arg-levels"></a></dt>
<dd><p>Optional character vector of levels of <code>data[[time]]</code>
in chronological order. Used to turn <code>data[[time]]</code> into an
ordered factor.
Either <code>order</code> or <code>levels</code> must be supplied, but not both together.</p></dd>


<dt id="arg-time">time<a class="anchor" aria-label="anchor" href="#arg-time"></a></dt>
<dd><p>Character string with the name of the discrete time
variable in the data. This is the variable that <code>brm_data_chronologize()</code>
turns into an ordered factor. It needs to be specified explicitly
if and only if the <code>data</code> argument was not produced by a call to
<code><a href="brm_data.html">brm_data()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame with the time column as an ordered factor.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Most MMRMs should use an ordered factor for the <code>time</code> column
in the data. This way, individual time points are treated as
distinct factor levels for the purposes of fixed effect parameterizations
(see the "Contrasts" section), and the explicit ordering ensures
that informative prior archetypes and ARMA-like correlation structures
are expressed correctly. Without the ordering, problems can arise when
character vectors are sorted: e.g. if <code>AVISIT</code> has levels
<code>"VISIT1", "VISIT2", ..., "VISIT10"</code>, then <code>brms</code> will mistake the
the order of scheduled study visits to be
<code>"VISIT1", "VISIT10", "VISIT2", ...</code>, which is not chronological.</p>
<p>You can easily turn
the time variable into an ordered factor using
<code>brm_data_chronologize()</code>. Either supply an explicit character vector
of chronologically-ordered factor levels in the <code>levels</code> argument,
or supply the name of a time-ordered variable in the <code>order</code> argument.</p>
<p><code>brm_data_chronologize()</code> can be called either before or just after
<code><a href="brm_data.html">brm_data()</a></code>, but in the former case, the discrete time variable
needs to be specified explicitly in <code>time</code> argument. And in the latter,
<code>brm_data_chronologize()</code> must be called before any of the informative
prior archetype functions such as <code><a href="brm_archetype_successive_cells.html">brm_archetype_successive_cells()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="contrasts">Contrasts<a class="anchor" aria-label="anchor" href="#contrasts"></a></h2>


<p>Ordinarily, ordered factors automatically use polynomial contrasts from
<code><a href="https://rdrr.io/r/stats/contrast.html" class="external-link">contr.poly()</a></code>. This is undesirable for MMRMs, so if the time variable
is an ordered factor, then <code><a href="brm_data.html">brm_data()</a></code>
manually sets <code>contrasts(data[[time]])</code> to a set of treatment contrasts
using <code><a href="https://rdrr.io/r/stats/contrast.html" class="external-link">contr.treatment()</a></code>. If you prefer different contrasts, please
manually set <code>contrasts(data[[time]])</code> to something else after
calling <code><a href="brm_data.html">brm_data()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other data:
<code><a href="brm_data.html">brm_data</a>()</code>,
<code><a href="brm_data_change.html">brm_data_change</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="brm_simulate_outline.html">brm_simulate_outline</a></span><span class="op">(</span>n_time <span class="op">=</span> <span class="fl">12</span>, n_patient <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data</span><span class="op">$</span><span class="va">AVISIT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"_0"</span>, <span class="st">"_"</span>, <span class="va">data</span><span class="op">$</span><span class="va">time</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data</span><span class="op">$</span><span class="va">AVISITN</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"time_"</span>, <span class="st">""</span>, <span class="va">data</span><span class="op">$</span><span class="va">time</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AVISIT"</span>, <span class="st">"AVISITN"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 96 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    AVISIT  AVISITN</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> time_1        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> time_2        2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> time_3        3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> time_4        4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> time_5        5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> time_6        6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> time_7        7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> time_8        8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> time_9        9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> time_10      10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 86 more rows</span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">AVISIT</span><span class="op">)</span><span class="op">)</span> <span class="co"># wrong order</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "time_1"  "time_10" "time_11" "time_12" "time_2"  "time_3"  "time_4" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8] "time_5"  "time_6"  "time_7"  "time_8"  "time_9" </span>
<span class="r-in"><span><span class="va">data1</span> <span class="op">&lt;-</span> <span class="fu">brm_data_chronologize</span><span class="op">(</span><span class="va">data</span>, time <span class="op">=</span> <span class="st">"AVISIT"</span>, order <span class="op">=</span> <span class="st">"AVISITN"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">data1</span><span class="op">$</span><span class="va">AVISIT</span><span class="op">)</span><span class="op">)</span> <span class="co"># correct order</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] time_1  time_2  time_3  time_4  time_5  time_6  time_7  time_8  time_9 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10] time_10 time_11 time_12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 Levels: time_1 &lt; time_2 &lt; time_3 &lt; time_4 &lt; time_5 &lt; time_6 &lt; ... &lt; time_12</span>
<span class="r-in"><span><span class="va">levels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"time_"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fl">12</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data2</span> <span class="op">&lt;-</span> <span class="fu">brm_data_chronologize</span><span class="op">(</span><span class="va">data</span>, time <span class="op">=</span> <span class="st">"AVISIT"</span>, levels <span class="op">=</span> <span class="va">levels</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">data2</span><span class="op">$</span><span class="va">AVISIT</span><span class="op">)</span><span class="op">)</span> <span class="co"># correct order</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] time_1  time_2  time_3  time_4  time_5  time_6  time_7  time_8  time_9 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10] time_10 time_11 time_12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 Levels: time_1 &lt; time_2 &lt; time_3 &lt; time_4 &lt; time_5 &lt; time_6 &lt; ... &lt; time_12</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by William Michael Landau, Kevin Kunzmann, Yoni Sidi, Christian Stock, Eli Lilly and Company, Boehringer Ingelheim Pharma GmbH &amp; Co. KG.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

